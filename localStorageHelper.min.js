;(function(){function f(a){if(this.available){Object.defineProperties(this,{instance:{get:function(){return this}},debugging:{enumerable:!1,value:a?!0:!1,writable:!0},info:{value:function(){this.debugging&&console&&console.info&&console.info.apply(window,arguments)}},debug:{value:function(){this.debugging&&console&&console.debug&&console.debug.apply(window,arguments)}},warn:{value:function(){this.debugging&&console&&console.warn&&console.warn.apply(window,arguments)}},error:{value:function(){this.debugging&&
console&&console.error&&console.error.apply(window,arguments)}}});for(var b in this.methods)k.call(this,b);return this}}function k(a){this[a]||Object.defineProperty(this,a,{value:function(){return this.fire.apply(this,[a].concat(Array.prototype.slice.call(arguments,0)))}});this.events[a]||(Object.defineProperty(this.events,a,{value:{begin:function(){return l.apply(this,[a].concat(Array.prototype.slice.call(arguments,0)))},end:function(){return m.apply(this,[a].concat(Array.prototype.slice.call(arguments,
0)))}}}),Object.defineProperty(this.events[a].begin,"callbacks",{value:[]}),Object.defineProperty(this.events[a].end,"callbacks",{value:[]}));return this}function l(a){if(this.instance&&(Array.prototype.slice.call(arguments,1),this.events[a]&&this.events[a].begin)){var b=this.events[a].begin.callbacks;if(b&&b.length){this.info("Triggering "+a+"Begin Callbacks:\n\t",b);for(var c in b)b[c].apply(this,[new Event(a+"Begin"),arguments])}}return this}function m(a){if(this.instance&&(Array.prototype.slice.call(arguments,
1),this.events[a]&&this.events[a].end)){var b=this.events[a].end.callbacks;if(b&&b.length){this.info("Triggering "+a+"End Callbacks:\n\t",b);for(var c in b)b[c].apply(this,[new Event(a+"End"),arguments])}}return this}var n=function(){try{var a=window.localStorage;a.setItem("__storage_test__","__storage_test__");a.removeItem("__storage_test__");return!0}catch(b){return!1}}();Object.defineProperty(f,"available",{enumerable:!0,value:n,writeable:!1});Object.defineProperties(f.prototype,{available:{enumerable:!0,
get:function(){return f.available},writeable:!1},arrangeArgs:{value:function(){for(var a=Array.prototype.slice.call(arguments,0),b=this.prefix||this.prototype.prefix,c=[],d=0;d<a.length;d++){var e=a[d];if("string"==typeof e){var h=b+e;-1==c.indexOf(h)&&f.prototype.methods.keyExists(h)&&c.push(h);-1==c.indexOf(e)&&f.prototype.methods.keyExists(e)&&c.push(e)}else"number"==typeof e?(h=f.prototype.methods.key.call(f,e))&&-1==c.indexOf(h)&&c.push(h):e instanceof Array&&(c=c.concat(this.arrangeArgs.apply(this,
e)))}return c}},callbacks:{value:{}},events:{value:{}},fire:{value:function(a){var b=null;this.trigger(a+"Begin");this.instance&&this.methods[a]&&(b=Array.prototype.slice.call(arguments,1),this.debug("Firing Method:\t["+a+"]\tArguments:\t",b),b=this.methods[a].apply(this,b));this.trigger(a+"End");return b}},keys:{get:function(){return Object.keys(localStorage)}},length:{get:function(){return this.available?localStorage.length:null}},methods:{value:{clear:function(){localStorage.clear();return this},
getItem:function(){var a=f.prototype.arrangeArgs.apply(this,arguments),b=null,c=0;if(!a.length){if(this.length){var b={},d;for(d in localStorage){a=localStorage[d];try{b[d]=JSON.parse(a)}catch(e){b[d]=a}c++}}}else if(1==a.length){if("string"==typeof a[0]){a=a[0].replace(this.prefix,"");c=null;if(localStorage[a])a:{a=localStorage[a];try{c=JSON.parse(a);break a}catch(e){}c=a}if(c){b=c.hasOwnProperty("type")&&"jQuery"==c.type;c=c.hasOwnProperty("value")?c.value:c;if(b&&c instanceof Array&&window.hasOwnProperty("jQuery")){b=
jQuery("<div />");for(d in c)b.append(jQuery(c[d]).get());c=b.children()}b=c}}}else if(1<a.length)for(d in b={},a)c=f.prototype.methods.getItem.call(f,a[d]),null!=c&&(b[a[d]]=c);return b},key:function(){var a=Array.prototype.slice.call(arguments,0),b=null;if(a.length)if(1==a.length){var c=a[0];"number"==typeof c?b=localStorage.key(c):"string"==typeof c&&-1<Object.keys(localStorage).indexOf(c)?b=Object.keys(localStorage).indexOf(c):c instanceof Array&&(b=f.prototype.methods.key.apply(f,c))}else{c=
{};for(b=0;b<a.length;b++){var d=a[b],e=f.prototype.methods.key(d);c[d]||(c[d]=e)}b=c?c:null}else b=Object.keys(localStorage);return b},keyExists:function(a){try{return localStorage[a]?!0:!1}catch(b){}return!1},removeItem:function(){var a=f.prototype.arrangeArgs.apply(this,arguments);if(a.length)for(var b=0;b<a.length;b++)localStorage.removeItem(a[b]);return this},setItem:function(){var a=Array.prototype.slice.call(arguments,0),b={};if(1<a.length)for(var c=0;c<a.length;c++){var d=a[c],e=f.prototype.realType.call(d);
console.log([c&&"String"==f.prototype.realType.call(a[c-1])],"jQuery"==e,"object"==typeof d);if(c&&"String"==f.prototype.realType.call(a[c-1]))b[a[c-1]]={type:e,value:d};else if("jQuery"==e){if(window.jQuery&&d.selector){var h=[],g;for(g in d)d[g]&&d[g].outerHTML&&"string"==typeof d[g].outerHTML&&h.push(d[g].outerHTML.replace(/>(\n|\r|\t)*</g,"><"));h.length&&(b[d.selector]={type:e,value:h})}}else if("object"==typeof d)for(g in d)g&&"string"==typeof g&&(e=f.prototype.realType.call(d[g]),b[g]={type:e,
value:d[g]})}else if("jQuery"==f.prototype.realType.call(a[0])&&(d=a[0],e=f.prototype.realType.call(d),window.jQuery&&d.selector)){h=[];for(g in d)d[g]&&d[g].outerHTML&&"string"==typeof d[g].outerHTML&&h.push(d[g].outerHTML.replace(/>(\n|\r|\t)*</g,"><"));h.length&&(b[d.selector]={type:e,value:h})}if(b)for(g in b)localStorage.setItem(this.prefix+g,JSON.stringify(b[g]));return this}}},off:{value:function(a,b){if(this.instance&&a&&"string"==typeof a&&b&&"function"==typeof b){var c=/^(([a-z]){3,}([A-Z]{1}[a-z]+){0,1})(Begin|End)$/,
d=a,e="end";c.test(a)&&(d=a.match(c)[1],e=a.match(c)[4].toLowerCase());if(this.events[d]&&this.events[d][e].callbacks)for(c=this.events[d][e].callbacks,d=b.toString().replace(/ |\t|\r|\n/ig,""),e=0;e<c.length;e++){var f=c[e].toString().replace(/ |\t|\r|\n/ig,"");d==f&&c.splice(e,1)}}return this}},on:{value:function(a,b){if(this.instance&&a&&"string"==typeof a&&b&&"function"==typeof b){var c=/^(([a-z]){3,}([A-Z]{1}[a-z]+){0,1})(Begin|End)$/,d=a,e="end";c.test(a)&&(d=a.match(c)[1],e=a.match(c)[4].toLowerCase());
if(this.events[d]){var c=this.events[d][e].callbacks,f=b.toString().replace(/ |\t|\r|\n/ig,"");-1==c.indexOf(f)&&this.events[d][e].callbacks.push(b)}this.info(this.events[d]?!0:!1,[this.events[d],this.events[d][e],this.events[d][e].callbacks])}return this}},prefix:{value:"__lsh__"},realType:{value:function(a){var b=typeof this;try{b=window.hasOwnProperty("jQuery")&&this.constructor&&this.constructor==jQuery?"jQuery":this.constructor&&this.constructor.name?this.constructor.name:Object.prototype.toString.call(this).slice(8,
-1)}catch(c){this.toString&&(b=this.toString().slice(8,-1))}return a?b.toLowerCase():b}},trigger:{value:function(a){if(this.instance&&a&&"string"==typeof a){var b=Array.prototype.slice.call(arguments,1),c=/^(([a-z]){3,}([A-Z]{1}[a-z]+){0,1})(Begin|End)$/,d=a,e="end";c.test(a)&&(d=a.match(c)[1],e=a.match(c)[4].toLowerCase());this.warn("Triggering Event:\t["+a+"]\tArguments:\t",b);if(this.events[d])return this.events[d][e].apply(this,b)}return null}}});window.hasOwnProperty("localStorageHelper")||(window.localStorageHelper=
f)})();
