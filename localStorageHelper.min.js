function localStorageHelper(){function m(a){var b="on"+(a.charAt(0).toUpperCase()+a.slice(1)),e=function(a){if("function"==typeof a){var e=this[b].handlers,c=a.toString().replace(/ |\t|\r|\n/ig,""),d;for(d in e)if(c==e[d].toString().replace(/ |\t|\r|\n/ig,""))return this[b];e.push(a)}return this[b]};e.fire=function(b,e,c){var d=this.handlers,g={eventType:a};void 0!==b&&null!==b&&(g.key=b);void 0!==e&&null!==e&&(g.value=e);void 0!==c&&null!==c&&(g.success=c);g.url=window.location.toString();for(var h in d)d[h].apply(l,
[g])};e.handlers=[];return e}var l=this;l.ticket=function(){for(var a=(Math.random()*eval("1e"+~~(50*Math.random()+50))).toString(36).split(""),b=3;b<a.length;b++)b==~~(Math.random()*b)+1&&a[b].match(/[a-z]/)&&(a[b]=a[b].toUpperCase());a=a.join("");a=a.substr(~~(Math.random()*~~(a.length/3)),~~(Math.random()*(a.length-~~(a.length/3*2)+1))+~~(a.length/3*2));return a.substr(a,10)}();l.ticket="lsh_"+l.ticket;var r;try{r="localStorage"in window&&null!==window.localStorage}catch(a){r=!1}this.isAvailable=
r;this.keyExists=function(a){return this.isAvailable&&void 0!==a&&localStorage.key(a)};this.keyAtIndex=function(a){return this.isAvailable?localStorage.key(a):void 0};this.getKeys=function(){if(this.isAvailable){for(var a=[],b=0;b<localStorage.length;b++)a.push(localStorage.key(b));return a}};this.getValues=function(){if(this.isAvailable){for(var a=[],b=0;b<localStorage.length;b++)a.push(this.get(localStorage.key(b)));return a}};this.warn=function(a){window.console&&window.console.warn&&console.warn.apply(console,
["localStorageHelper Warning:\t",a,Array.prototype.slice.call(arguments,1)])};this.error=function(){window.console&&window.console.error&&console.error.apply(console,["localStorageHelper ERROR:\t",arguments])};this.serialize=function(a){var b,e,n,k=n="",c=0;b=function(a){for(var b=0,c=0,e=a.length,d="",c=0;c<e;c++)d=a.charCodeAt(c),b=128>d?b+1:2048>d?b+2:b+3;return b};var d=function(a){var b,c,e=typeof a;if("object"===e&&!a)return"null";if("object"===e){if(!a.constructor)return"object";a=a.constructor.toString();
(b=a.match(/(\w+)\(/))&&(a=b[1].toLowerCase());b=["boolean","number","string","array"];for(c in b)if(a===b[c]){e=b[c];break}}return e},g=d(a);switch(g){case "function":b="";break;case "boolean":b="b:"+(a?"1":"0");break;case "number":b=(Math.round(a)===a?"i":"d")+":"+a;break;case "string":b="s:"+b(a)+':"'+a+'"';break;case "array":case "object":b="a";for(e in a)a.hasOwnProperty(e)&&(n=d(a[e]),"function"!==n&&(n=e.match(/^[0-9]+$/)?parseInt(e,10):e,k+=this.serialize(n)+this.serialize(a[e]),c++));b+=
":"+c+":{"+k+"}";break;default:b="N"}"object"!==g&&"array"!==g&&(b+=";");return b};this.unserialize=function(a){var b=this;error=function(a,n,k,c){throw new b.window[a](n,k,c);};read_until=function(a,b,k){for(var c=2,d=[],g=a.slice(b,b+1);g!=k;)c+b>a.length&&error("Error","Invalid"),d.push(g),g=a.slice(b+(c-1),b+c),c+=1;return[d.length,d.join("")]};read_chrs=function(a,b,k){var c,d,g;g=[];for(c=0;c<k;c++)d=a.slice(b+(c-1),b+c),g.push(d),d=d.charCodeAt(0),d=128>d||160<=d&&255>=d||-1!=[338,339,352,
353,376,402,8211,8212,8216,8217,8218,8220,8221,8222,8224,8225,8226,8230,8240,8364,8482].indexOf(d)?0:2048>d?1:2,k-=d;return[g.length,g.join("")]};_unserialize=function(a,b){var k,c,d,g,h,f,l,m,p;h=0;var q=function(a){return a};b||(b=0);k=a.slice(b,b+1).toLowerCase();c=b+2;switch(k){case "i":q=function(a){return parseInt(a,10)};f=read_until(a,c,";");h=f[0];f=f[1];c+=h+1;break;case "b":q=function(a){return 0!==parseInt(a,10)};f=read_until(a,c,";");h=f[0];f=f[1];c+=h+1;break;case "d":q=function(a){return parseFloat(a)};
f=read_until(a,c,";");h=f[0];f=f[1];c+=h+1;break;case "n":f=null;break;case "s":f=read_until(a,c,":");h=f[0];d=f[1];c+=h+2;f=read_chrs(a,c+1,parseInt(d,10));h=f[0];f=f[1];c+=h+2;h!=parseInt(d,10)&&h!=f.length&&error("SyntaxError","String length mismatch");break;case "a":f={};d=read_until(a,c,":");h=d[0];d=d[1];c+=h+2;h=parseInt(d,10);g=!0;for(d=0;d<h;d++)l=_unserialize(a,c),m=l[1],l=l[2],c+=m,p=_unserialize(a,c),m=p[1],p=p[2],c+=m,l!==d&&(g=!1),f[l]=p;if(g){g=Array(h);for(d=0;d<h;d++)g[d]=f[d];f=
g}c+=1;break;default:error("SyntaxError","Unknown / Unhandled data type(s): "+k)}return[k,c-b,q(f)]};return _unserialize(a+"",0)[2]};this.get=function(a){if(this.isAvailable)if("number"===typeof a&&(a=this.keyAtIndex(a)),this.keyExists(a)){var b;try{return b=JSON.parse(localStorage.getItem(a))}catch(l){return b=localStorage.getItem(a)}finally{this.onGet.fire(a,b)}}else if(void 0===a){b={};try{for(var e=0;e<localStorage.length;e++)this.keyAtIndex(e)&&(b[this.keyAtIndex(e)]=this.get(this.keyAtIndex(e)));
return b}finally{this.onGet.fire(a,b)}}};this.set=function(a,b){this.isAvailable&&this.onSet.fire(a,b,function(){try{try{localStorage.setItem(a,JSON.stringify(b))}catch(e){localStorage.setItem(a,b)}return!0}catch(e){}return!1}());return l};this.remove=function(a){this.isAvailable&&this.keyExists(a)&&this.onRemove.fire(a,this.get(a),function(){try{return localStorage.removeItem(a),!0}catch(b){return!1}}());return l};this.clear=function(){this.isAvailable&&this.onClear.fire(null,null,function(){try{return localStorage.clear(),
!0}catch(a){return!1}}());return l};this.on=function(a,b){a="on"+(a.charAt(0).toUpperCase()+a.slice(1));this.hasOwnProperty(a)&&this[a].apply(l,[b]);return l};this.off=function(a,b){a="on"+(a.charAt(0).toUpperCase()+a.slice(1));if(this.hasOwnProperty(a)&&"function"==typeof b){var e=this[a].handlers,m=b.toString().replace(/ |\t|\r|\n/ig,""),k;for(k in e)if(m==e[k].toString().replace(/ |\t|\r|\n/ig,"")){e.splice(k,1);break}}return l};this.onGet=m.apply(this,["get"]);this.onSet=m.apply(this,["set"]);
this.onRemove=m.apply(this,["remove"]);this.onClear=m.apply(this,["clear"]);if(!this.isAvailable)throw arguments.length&&"function"==typeof arguments[0]&&arguments[0].apply(l,[{isAvailable:this.isAvailable,Error:"[localStorage] is unavailble!"}]),Error("[localStorage] is unavailble!");return this};
